[RunControl]
RunSizeLimit = 500

[DataCollector]
FilePattern = "../data/run$6R$X"

[LogCollector]
SaveLevel = EXTRA
PrintLevel = DEBUG


[Producer.RPI]
RPI_1_IP = '127.0.0.1'
# svhgcal01:
#RPI_1_IP = '128.141.151.253' 
# Main RPI on the ReadOut board::
#RPI_1_IP = '192.168.222.3'
# Spare RPI:
#RPI_1_IP = '192.168.222.99'

# Other addresses for tests:
#RPI_1_IP = '128.141.196.154'
#RPI_1_IP = '128.141.196.225'
#RPI_1_IP = '128.141.149.196'

# These should not be changed:
portTCP = '55511'
portUDP = '55512'

# Instead of IP addresses, we use aliases for SSH for clarity. The alias-to-IP-address correspondence is defined here: $HOME/.ssh/config
piSynch_IP = "piS"
piRDOUT1_IP = "pi1"
piRDOUT2_IP = "pi2"
piRDOUT3_IP = "pi3"
piRDOUT4_IP = "pi4"

# Mask for which RDOUT boards to configure, as a string of 1s and 0s. 1 = enable, 0 = disable; leftmost digit is assumed to correspond to the board with IP = piRDOUT1_IP. For example, "0010" enables configuring only piRDOUT3, "1100" configures piRDOUT1 and piRDOUT2, etc.
RDOUTMask = "0010"

# Hardcoded SKIROC configuration strings for individual RDOUT boards. The script is executed in the following format:
# source targetDirPath_Skirocs/resetConfiguration_Skirocs_exe_fileName INDICES_STRING
# where INDICES_STRING is the following:
# skirocIndices_RDOUT1 = "1 3 2 4"
# skirocIndices_RDOUT2 = "1 3 2 4"
# skirocIndices_RDOUT3 = "1 3 2 4"
# skirocIndices_RDOUT4 = "1 3 2 4"
skirocIndices_RDOUT1 = " "
skirocIndices_RDOUT2 = " "
skirocIndices_RDOUT3 = "0 1 2 3 4"
skirocIndices_RDOUT4 = " "

sourceDirPath_Synch = "/home/daq/forConfiguration_EUDAQ/sourceDir_Synch"
targetDirPath_Synch = "/home/pi/forConfiguration_EUDAQ/targetDir_Synch"
resetConfiguration_Synch_exe_fileName = "resetConfiguration_Synch.sh"
sourceDirPath_Readout = "/home/daq/forConfiguration_EUDAQ/sourceDir_Readout"
targetDirPath_Readout = "/home/pi/forConfiguration_EUDAQ/targetDir_Readout"
resetConfiguration_Readout_exe_fileName = "resetConfiguration_Readout.sh"
sourceDirPath_Skirocs = "/home/daq/forConfiguration_EUDAQ/sourceDir_Skirocs"
targetDirPath_Skirocs = "/home/pi/forConfiguration_EUDAQ/targetDir_Skirocs"
resetConfiguration_Skirocs_exe_fileName = "resetConfiguration_Skirocs.sh"

[Producer.CaliceSc]
#FileLEDsettings ="F:\\LEDEUDAQ\\LED1.ini"
FileMode = 0
WaitMillisecForFile = 3000
# waitsecondsForQueuedEvents: Sleeping time (in seconds) after clicking stop: needed to read all the events stored in the Labview data queue
waitsecondsForQueuedEvents = 3
Port = 5622
IPAddress = "192.168.1.11"
Reader = "Scintillator"
WriteRawOutput = 1
#RawFileName = "../data/Run_%05d"
RawFileName = "../data/rawAHCAL_%05d"
WriteRawFileNameTimestamp = 0
ColoredTerminalMessages = 1

#LdaTrigidOffset to compensate differences between TLU (or other trigger number source) and LDA. Eudaq Event counting starts from this number and will be always subtracted from the eudaq event triggerid.
LdaTrigidOffset = 1
#LdaTrigidStartsFrom: The first expected raw triggerID from LDA in the data stream in case it is not 0. It suppresses error warning for the first event. When set higher then the first event, triggers below the provided number are ignored!
LdaTrigidStartsFrom = 1
#GenerateTriggerIDFrom sets from which triggerID number should be data generated (and filled with dummy triggers if necessary). Only works when insert_dummy_packets is enabled and in selected event building modes 
GenerateTriggerIDFrom = 0
#InsertDummyPackets: 1=inserts dummy packets to keep correct sequence of TrigIDs or ReadOutCycles; 0=do not insert anything
InsertDummyPackets = 1

#When RedirectInputFromFile is set, an existing raw raw data file is used as a fake input from detector
#RedirectInputFromFile="/home/calice/Desktop/EUDAQ2-testbeam2017February/data/detector_45015.raw"
RedirectInputFromFile="../data/ahcal/detector_45131.raw"
#EventBuildingMode selects what event building will be used and
#EventBuildingMode = "ROC"
#EventBuildingMode = "TRIGGERID"
#EventBuildingMode = "BUILD_BXID_ALL"
EventBuildingMode = "BUILD_BXID_VALIDATED" 

#EventNumberingPreference chooses a main numbering method, when both are available (especially in BUILD_BXID_VALIDATE and TRIGGERID event building mode) 
EventNumberingPreference = "TRIGGERID"
#EventNumberingPreference = "TIMESTAMP"

#IgnoreLdaTimestamps ignores timestamp in the LDA data stream
IgnoreLdaTimestamps = 0

#DebugKeepBuffered: 1=keep events in producer buffer and don't send the data to data collector. 0=pass packets normally
DebugKeepBuffered = 0

#AHCALBXID0offset = offset from start acquisition Timestamp to BXID0 (in 25ns steps). Varies with AHCAL powerpulsing setting and DIF firmware
AHCALBXID0Offset = 2123
#AHCALBXID0Offset = 61415 #powerpulsing
#AHCALBXIDWidth = length of the bxid in 25 ns steps. 4us=160, 200ns=8
AHCALBXIDWidth = 160



[Producer.DWCs]
dataFilePrefix = "../data/dwc_run_"
AcquisitionMode = 1


baseAddress = 0x00AA0000
model = 1
triggerTimeSubtraction = 1
triggerMatchMode = 1
emptyEventEnable = 1
edgeDetectionMode = 2
timeResolution = 3
maxHitsPerEvent = 9
enabledChannels = 0xFFFF
windowWidth = 0x400
windowOffset = -100


defaultTimestamp = -999

N_channels = 16

channel_0 = 1
channel_1 = 1
channel_2 = 1
channel_3 = 1
channel_4 = 1
channel_5 = 1
channel_6 = 1
channel_7 = 1
channel_8 = 1
channel_9 = 1
channel_10 = 1
channel_11 = 1
channel_12 = 1
channel_13 = 1
channel_14 = 1
channel_15 = 1


dwc1_left_channel = 0
dwc1_right_channel = 1
dwc1_down_channel = 2
dwc1_up_channel = 3
dwc2_left_channel = 4
dwc2_right_channel = 5
dwc2_down_channel = 6
dwc2_up_channel = 7
dwc3_left_channel = 15
dwc3_right_channel = 14
dwc3_down_channel = 13
dwc3_up_channel = 12
dwc4_left_channel = 11    
dwc4_right_channel = 10
dwc4_down_channel = 9
dwc4_up_channel = 8

slope_x = 0.2
slope_y = 0.2